# 1. ユーザーストーリー

本システムのユーザーストーリーをフェーズごとに定義します。

## MVP (Phase 1)

### 1. エージェント選択

**As a ユーザー**

- 複数のエージェントから1つを選択できる
- エージェント情報(名前・説明)を確認できる
- デフォルトで汎用チャットエージェントが選択されている

**受け入れ基準**

- サイドバーにエージェント一覧が表示される
- 選択中のエージェント名が左上に表示される
- 各エージェントの説明文をUI上で確認できる

### 2. テキストチャット

**As a ユーザー**

- テキストメッセージを送信できる
- AIの応答がストリーミング表示される(逐次的に文字が表示)
- 会話履歴がセッション内で保持される

**受け入れ基準**

- メッセージ入力フォームから送信可能
- AIレスポンスが1文字ずつ表示される
- 過去のメッセージが画面上に保持される
- セッション内で会話が継続できる

### 3. MCPツール実行

**As a ユーザー**

- エージェントがMCPツール(Webスクレイピング)を使用できる
- ツール実行結果が会話に反映される

**受け入れ基準**

- URLを含むメッセージでスクレイピングが実行される
- ツール実行中の状態が表示される
- 取得したWebページ情報が回答に含まれる

---

## Phase 2

### 4. 会話履歴の永続化

**As a ユーザー**

- セッションごとに会話履歴がDB保存される
- 過去の会話を再読み込みできる

**受け入れ基準**

- サーバー再起動後も会話履歴が残る
- セッション一覧から過去の会話を選択できる
- 会話の続きから再開できる

### 5. ファイルアップロード

**As a ユーザー**

- PDF/TXT/MDファイルをアップロードできる
- ファイル内容を会話コンテキストとして使用できる

**受け入れ基準**

- ファイル選択UIからアップロード可能
- アップロードしたファイルがS3に保存される
- ファイル内容を参照した回答が得られる

### 6. 複数LLM SDK対応

**As a 開発者**

- AWS Bedrock (Lambda)に移行できる
- ADK実装を追加できる(別リポジトリ)

**受け入れ基準**

- フロントエンドのコード変更なしでSDK切り替え可能
- Bedrockでも同じAPIインターフェースで動作
- ADK実装が独立して動作

---

## Phase 3以降

### 7. ユーザー認証・管理

**As a ユーザー**

- アカウント登録・ログインができる
- 自分の会話履歴のみ閲覧できる

**受け入れ基準**

- ユーザー登録フォーム
- ログイン認証
- ユーザーごとの会話履歴分離

### 8. エージェント切り替え

**As a ユーザー**

- 会話中にエージェントを切り替えられる
- 会話履歴が複数エージェント間で共有される

**受け入れ基準**

- 会話中にエージェント選択を変更できる
- 切り替え後も会話履歴が保持される
- コンテキストが引き継がれる

### 9. 複雑なMCP統合

**As a ユーザー**

- ファイルシステムにアクセスできる
- データベースに接続できる
- カスタムMCP Serverを使用できる

**受け入れ基準**

- ファイル読み書き操作が可能
- DB操作が実行できる
- 独自ツールを追加できる